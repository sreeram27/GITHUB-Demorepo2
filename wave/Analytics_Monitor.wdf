["{\"nodes\":{\"RemoveDotFieldsPSLsEA\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"PSL.DeveloperName\"},{\"name\":\"PSL.MasterLabel\"},{\"name\":\"PSL.Status\"},{\"name\":\"User.IsActive\"},{\"name\":\"User.Name\"},{\"name\":\"User.SmallPhotoUrl\"},{\"name\":\"User.Username\"}],\"mode\":\"drop\"},\"sources\":[\"Add_underscore_fields_to_PSLsEA\"]},\"AugmentProfile\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"ProfileId\"],\"relationship\":\"Profile\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"PermissionsModifyAllData\",\"PermissionsCustomizeApplication\",\"PermissionsViewAllData\",\"PermissionsViewSetup\",\"PermissionsManageUsers\"]},\"sources\":[\"ExtractUser\",\"ExtractProfile\"]},\"LoadWaveChangeLog\":{\"action\":\"dataset\",\"parameters\":{\"name\":\"WaveChange1\"}},\"Add_underscore_fields_WaveInteraction\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"User_Name\",\"name\":\"User_Name\",\"saqlExpression\":\"'User.Name'\",\"type\":\"Text\"},{\"label\":\"User_Division\",\"name\":\"User_Division\",\"saqlExpression\":\"'User.Division'\",\"type\":\"Text\"},{\"label\":\"User_SmallPhotoUrl\",\"name\":\"User_SmallPhotoUrl\",\"saqlExpression\":\"'User.SmallPhotoUrl'\",\"type\":\"Text\"},{\"label\":\"User_User_Role_Name\",\"name\":\"User_User_Role_Name\",\"saqlExpression\":\"'User.User.Role.Name'\",\"type\":\"Text\"},{\"label\":\"User_Username\",\"name\":\"User_Username\",\"saqlExpression\":\"'User.Username'\",\"type\":\"Text\"},{\"label\":\"User_Department\",\"name\":\"User_Department\",\"saqlExpression\":\"'User.Department'\",\"type\":\"Text\"},{\"label\":\"User_Profile_Name\",\"name\":\"User_Profile_Name\",\"saqlExpression\":\"'User.Profile.Name'\",\"type\":\"Text\"},{\"label\":\"Wave_objects_Label\",\"name\":\"Wave_objects_Label\",\"saqlExpression\":\"'Wave_objects.Label'\",\"type\":\"Text\"},{\"label\":\"User_IsActive\",\"name\":\"User_IsActive\",\"saqlExpression\":\"'User.IsActive'\",\"type\":\"Text\"},{\"label\":\"Wave_objects_Id\",\"name\":\"Wave_objects_Id\",\"saqlExpression\":\"'Wave_objects.Id'\",\"type\":\"Text\"},{\"label\":\"User_City\",\"name\":\"User_City\",\"saqlExpression\":\"'User.City'\",\"type\":\"Text\"},{\"label\":\"Wave_objects_Name\",\"name\":\"Wave_objects_Name\",\"saqlExpression\":\"'Wave_objects.Name'\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Augment_WaveObjects_onto_AugmentWaveInteractionUser\"]},\"Register_PSLsEA\":{\"action\":\"register\",\"parameters\":{\"label\":\"PSLsEA\",\"name\":\"PSLsEA1\"},\"sources\":[\"RemoveDotFieldsPSLsEA\"]},\"LoadWaveChangeEA\":{\"action\":\"dataset\",\"parameters\":{\"name\":\"WaveChangeEA3\"}},\"dropYesterdayWaveInteraction\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"yesterday\"}],\"mode\":\"drop\"},\"sources\":[\"filterYesterdayWaveInteraction\"]},\"Extract_PSLAssignment\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"PermissionSetLicenseId\"},{\"name\":\"AssigneeId\"}],\"object\":\"PermissionSetLicenseAssign\"}},\"filterKeepDaysWaveInteraction\":{\"action\":\"filter\",\"parameters\":{\"filter\":\"keep:EQ:yes\"},\"sources\":[\"appendWaveInteraction\"]},\"AugmentRole\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"UserRoleId\"],\"relationship\":\"Role\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"Roles\",\"RolePath\"]},\"sources\":[\"ExtractUser\",\"FlattenRole\"]},\"computeLabels\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"tempType\",\"name\":\"tempType\",\"saqlExpression\":\"(case when 'AssetType' == \\\"Lens\\\" then \\\"lens\\\" when 'AssetType' == \\\"Folder\\\" then \\\"application\\\" when 'AssetType' == \\\"Dashboard\\\" then \\\"dashboard\\\" else 'AssetType' end)\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Load_AnalyticsAssetLabelsSFDC\"]},\"ExtractUser\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Username\"},{\"name\":\"LastName\"},{\"name\":\"FirstName\"},{\"name\":\"Name\"},{\"name\":\"CompanyName\"},{\"name\":\"Division\"},{\"name\":\"Department\"},{\"name\":\"Street\"},{\"name\":\"City\"},{\"name\":\"State\"},{\"name\":\"PostalCode\"},{\"name\":\"Country\"},{\"name\":\"Title\"},{\"name\":\"Alias\"},{\"name\":\"CommunityNickname\"},{\"name\":\"UserType\"},{\"name\":\"UserRoleId\"},{\"name\":\"ProfileId\"},{\"name\":\"IsActive\"},{\"name\":\"SmallPhotoUrl\"}],\"object\":\"User\"}},\"RegisterWaveChangeEA\":{\"action\":\"register\",\"parameters\":{\"label\":\"WaveChangeEA\",\"name\":\"WaveChangeEA3\"},\"sources\":[\"dropKeepWaveInteraction\"]},\"tagYesterdayWaveInteraction\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"yesterday\",\"name\":\"yesterday\",\"saqlExpression\":\"(case when date('TIMESTAMP_DERIVED_Year', 'TIMESTAMP_DERIVED_Month', 'TIMESTAMP_DERIVED_Day') in [\\\"1 day ago\\\"..\\\"current day\\\"] then \\\"yes\\\" else \\\"no\\\" end)\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"LoadWaveChangeLog\"]},\"dropKeepWaveInteraction\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"keep\"},{\"name\":\"GDPR_OPT_OUT\"}],\"mode\":\"drop\"},\"sources\":[\"GDPR_Filter\"]},\"appendWaveInteraction\":{\"action\":\"append\",\"parameters\":{\"enableDisjointedSchemaMerge\":true},\"sources\":[\"setKeepWaveInteractionEA\",\"setKeepWaveInteraction\"]},\"ParseFolderName\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"ParsedRecordId\",\"name\":\"ParsedRecordId\",\"saqlExpression\":\"substr('RECORD_ID', 1, 18)\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"AugmentWaveInteractionUser\"]},\"Augment_PSL_onto_PSLAssignment\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"PermissionSetLicenseId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"PSL\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"MasterLabel\",\"Status\",\"DeveloperName\"]},\"sources\":[\"Extract_PSLAssignment\",\"Extract_PermissionSetLicense\"]},\"FlattenRole\":{\"action\":\"flatten\",\"parameters\":{\"multiField\":{\"name\":\"Roles\"},\"parentField\":\"ParentRoleId\",\"pathField\":{\"name\":\"RolePath\"},\"selfField\":\"Id\"},\"sources\":[\"ExtractRole\"]},\"filterYesterdayWaveInteraction\":{\"action\":\"filter\",\"parameters\":{\"filter\":\"yesterday:EQ:yes\"},\"sources\":[\"tagYesterdayWaveInteraction\"]},\"RemoveDotFieldsWaveInteraction\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"User.Username\"},{\"name\":\"User.Name\"},{\"name\":\"User.Division\"},{\"name\":\"User.Department\"},{\"name\":\"User.City\"},{\"name\":\"User.Country\"},{\"name\":\"User.IsActive\"},{\"name\":\"User.SmallPhotoUrl\"},{\"name\":\"User.User.Role.Name\"},{\"name\":\"Wave_objects.Label\"},{\"name\":\"Wave_objects.Id\"},{\"name\":\"Wave_objects.Name\"},{\"name\":\"User.Profile.Name\"}],\"mode\":\"drop\"},\"sources\":[\"Add_underscore_fields_WaveInteraction\"]},\"GDPR_Filter\":{\"action\":\"filter\",\"parameters\":{\"filter\":\"GDPR_OPT_OUT:EQ:false\"},\"sources\":[\"GDPR_Legal_Compute\"]},\"Augment_WaveObjects_onto_AugmentWaveInteractionUser\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"ParsedRecordId\",\"TYPE\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Wave_objects\",\"rightKey\":[\"Id\",\"tempType\"],\"rightSelect\":[\"Id\",\"Label\",\"Name\"]},\"sources\":[\"ParseFolderName\",\"computeLabels\"]},\"setKeepWaveInteractionEA\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"keep\",\"name\":\"keep\",\"saqlExpression\":\"(case when date('TIMESTAMP_DERIVED_Year', 'TIMESTAMP_DERIVED_Month', 'TIMESTAMP_DERIVED_Day') in [\\\"365 days ago\\\"..\\\"2 days ago\\\"] then \\\"yes\\\" else \\\"no\\\" end)\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"LoadWaveChangeEA\"]},\"setKeepWaveInteraction\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"keep\",\"name\":\"keep\",\"saqlExpression\":\"\\\"yes\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"RemoveDotFieldsWaveInteraction\"]},\"ExtractProfile\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"PermissionsModifyAllData\"},{\"name\":\"PermissionsCustomizeApplication\"},{\"name\":\"PermissionsViewAllData\"},{\"name\":\"PermissionsViewSetup\"},{\"name\":\"PermissionsManageUsers\"}],\"object\":\"Profile\"}},\"Add_underscore_fields_to_PSLsEA\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"PSL_DeveloperName\",\"name\":\"PSL_DeveloperName\",\"saqlExpression\":\"'PSL.DeveloperName'\",\"type\":\"Text\"},{\"label\":\"User_IsActive\",\"name\":\"User_IsActive\",\"saqlExpression\":\"'User.IsActive'\",\"type\":\"Text\"},{\"label\":\"PSL_MasterLabel\",\"name\":\"PSL_MasterLabel\",\"saqlExpression\":\"'PSL.MasterLabel'\",\"type\":\"Text\"},{\"label\":\"User_Name\",\"name\":\"User_Name\",\"saqlExpression\":\"'User.Name'\",\"type\":\"Text\"},{\"label\":\"PSL_Status\",\"name\":\"PSL_Status\",\"saqlExpression\":\"'PSL.Status'\",\"type\":\"Text\"},{\"label\":\"User_Username\",\"name\":\"User_Username\",\"saqlExpression\":\"'User.Username'\",\"type\":\"Text\"},{\"label\":\"User_SmallPhotoUrl\",\"name\":\"User_SmallPhotoUrl\",\"saqlExpression\":\"'User.SmallPhotoUrl'\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Augment_Users_onto_PSL\"]},\"GDPR_Legal_Compute\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"GDPR_OPT_OUT\",\"name\":\"GDPR_OPT_OUT\",\"saqlExpression\":\"(case when 'USER_ID_DERIVED' in [\\\"000000000000000AAA\\\",\\\"<USER_ID_DERIVED>\\\"] then \\\"true\\\" else \\\"false\\\" end)\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"filterKeepDaysWaveInteraction\"]},\"Load_AnalyticsAssetLabelsSFDC\":{\"action\":\"dataset\",\"parameters\":{\"name\":\"AnalyticsAssetLabelsSFDC\"}},\"Extract_PermissionSetLicense\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"DeveloperName\"},{\"name\":\"Id\"},{\"name\":\"MasterLabel\"},{\"name\":\"Status\"}],\"object\":\"PermissionSetLicense\"}},\"AugmentWaveInteractionUser\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"USER_ID_DERIVED\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"User\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Username\",\"Name\",\"Division\",\"Department\",\"City\",\"Country\",\"IsActive\",\"Profile.Name\",\"User.Role.Name\",\"SmallPhotoUrl\"]},\"sources\":[\"dropYesterdayWaveInteraction\",\"AugmentUser\"]},\"ExtractRole\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"ParentRoleId\"},{\"name\":\"RollupDescription\"},{\"name\":\"OpportunityAccessForAccountOwner\"},{\"name\":\"CaseAccessForAccountOwner\"},{\"name\":\"ContactAccessForAccountOwner\"},{\"name\":\"LastModifiedDate\"},{\"name\":\"LastModifiedById\"},{\"name\":\"SystemModstamp\"},{\"name\":\"DeveloperName\"},{\"name\":\"PortalAccountId\"},{\"name\":\"PortalType\"},{\"name\":\"PortalAccountOwnerId\"}],\"object\":\"UserRole\"}},\"Augment_Users_onto_PSL\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"AssigneeId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"User\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Username\",\"Name\",\"IsActive\",\"SmallPhotoUrl\",\"Department\",\"Division\",\"City\",\"User.Role.Name\",\"Country\",\"State\"]},\"sources\":[\"Augment_PSL_onto_PSLAssignment\",\"AugmentUser\"]},\"AugmentUser\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"relationship\":\"User\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Role.Name\"]},\"sources\":[\"AugmentProfile\",\"AugmentRole\"]},\"Load_DatasetLinkageSFDC\":{\"action\":\"dataset\",\"parameters\":{\"name\":\"DatasetLinkageSFDC\"}}}}",null]